<!doctype>
<html>
  <head>
    <title>Rock Paper Scissors Lizard Spock</title>
    <style>
    body {
      font-family: 'Helvetica Neue';
      margin: 15px 0 0 30px;
    }

    .choices img {
      width: 15%;
      margin-right: 3%;
      margin-top: 1%;
      cursor: pointer;
      opacity: 0.5;
      transition: 1s all ease;
    }

    .choices img:hover {
      width: 16%;
      opacity: 1;
      color: #aaa;
      margin-right: 2%;
      margin-top: 0%;
    }


    h2, h3 {
      text-transform: capitalize;
    }

    #results {
      list-style: none;
      height: 390px;
      overflow: hidden;
    }

    #results li {
      background: #999;
      color: #fff;
      font-size: 24px;
      border-radius: 8px;
      padding: 5px;
      width: 80%;
      margin-bottom: 10px;
    }

    #carosel{
      /* This the main container div */
      width:1000px;
      min-height:700px;
      margin:0 auto;
      background:url('img/bokeh.jpg') no-repeat 0 120px;
      position:relative;
      padding-top:1px;
    }

    #phoneCarousel{
      /*	This is the carousel section, it
      contains the stage and the arrows */
      height:390px;
      margin:90px auto 120px;
      position:relative;
      width:800px;
    }

    #phoneCarousel .arrow{
      /* The two arrows */
      width:44px;
      height:44px;
      background:url('img/arrows.png') no-repeat;
      position:absolute;
      top:50%;
      margin-top:-22px;
      left:0;
      cursor:pointer;
    }

    #phoneCarousel .next{
      /* Individual styles for the next icon */
      background-position:right top;
      left:auto;
      right:0;
    }

    /* Hover styles */

    #phoneCarousel .arrow:hover{
      background-position:left bottom;
    }

    #phoneCarousel .next:hover{
      background-position:right bottom;
    }

    #logo{
      background:url('img/logo.png') no-repeat;
      height:40px;
      text-indent:-9999px;
      width:210px;
      display:block;
    }

    #stage{
      /* The stage contains the animated phone images */
      left:50%;
      margin-left:-350px;
      position:absolute;
      width:700px;
      height:100%;
    }

    #stage img{
      /* Hiding all the images by default */
      display:none;
    }

    #stage .default{
      /*	This class is applied only to the iphone img by default
      and it is the only one visible if JS is disabled */
      display:block;
      left:50%;
      margin-left:-135px;
      position:absolute;
    }

    #stage .animationReady{
      /* This class is assigned to the images on load */
      display:block;
      position:absolute;
      top:0;
      left:0;
    }
    </style>
  </head>
  <body>
    <h1>Rock Paper Scissors Lizard Spock</h1>
    <div class='choices'>
      <img src="images/rock.png" data-pick='rock'>
      <img src="images/paper.png" data-pick='paper'>
      <img src="images/scissors.png" data-pick='scissors'>
      <img src="images/lizard.png" data-pick='lizard'>
      <img src="images/spock.png" data-pick='spock'>
    </div>
      <ul id="results">
      </ul>

      <div id="carosel">

        <div id="phoneCarousel">
          <div class="previous arrow"></div>
          <div class="next arrow"></div>

          <div id="stage">
            <img id="rock" class="default" src="images/rock.png" width="270" height="400" alt="rock" />
            <img id="paper" src="images/paper.png" width="270" height="400" alt="paper" />
            <img id="scissors" src="images/scissors.png" width="270" height="400" alt="scissors" />
            <img id="lizard" src="images/lizard.png" width="270" height="400" alt="lizard" />
          </div>
        </div>

      </div>


    <script src='lib/Player.js'></script>
    <script src='lib/Game.js'></script>
    <script src='http://code.jquery.com/jquery-2.1.1.min.js'></script>
    <script>
      $(document).ready(function(){
        var sam = new Player('Sam')
        var tony = new Player('Tony')
        var game = new Game(sam,tony);
        $('.choices img').on('click', function(){
          sam.picks($(this).data('pick'));

          tony.random_pick(Object.keys(game.PAIRS));

          $('#results').prepend('<li>' + game.winningMessage() + '</li>');
          $('li:nth-child(9)').remove();

        });


        var deg=0;

        /* Storing all the images into a variable */

        var images	= $('#stage img').removeClass('default').addClass('animationReady');
        var dim		= { width:images.width(),height:images.height()};

        var cnt = images.length;

        /* Finding the centers of the animation container: */
        var centerX = $('#stage').width()/2;
        var centerY = $('#stage').height()/2 - dim.height/2;

        function rotate(step,total){
          // This function will loop through all the phone images, and rotate them
          // with "step" degrees (10 in this implementation) till total > 0

          /* Increment the degrees: */
          deg+=step;

          var eSin,eCos,newWidth,newHeight,q;

          /* Loop through all the images: */
          for(var i=0;i<cnt;i++){

            /* Calculate the sine and cosine for the i-th image */

            q = ((360/cnt)*i+deg)*Math.PI/180;
            eSin		= Math.sin(q);
            eCos		= Math.cos(q);

            /*
            /	With the sine value, we can calculate the vertical movement,
            /	and the cosine will give us the horizontal movement.
            */

            q = (0.6+eSin*0.4);
            newWidth	= q*dim.width;
            newHeight	= q*dim.height;

            /*
            /	We are using the calculated sine value (which is in the range
            /	of -1 to 1) to calculate the opacity and z-index. The
            /	frontmost image has a sine value of 1, while the backmost
            /	one has a sine value of -1.
            */

            // eq() extracts the image at the i-th position:

            images.eq(i).css({
              top			: centerY+15*eSin,
              left		: centerX+200*eCos,
              opacity		: 0.8+eSin*0.2,
              marginLeft	: -newWidth/2,
              zIndex		: Math.round(80+eSin*20)
            }).width(newWidth).height(newHeight);
          }

          total-=Math.abs(step);
          if(total<=0) return false;

          // Setting the function to be run again in 40 milliseconds (equals to 25 frames per second):
          setTimeout(function(){rotate(step,total)},40);

        }

        // Running the animation once at load time (and moving the iPhone into view):
        rotate(10,360/cnt);

        $('#phoneCarousel .previous').click(function(){
          // 360/cnt lets us distribute the phones evenly in a circle
          rotate(-10,360/cnt);
        });

        $('#phoneCarousel .next').click(function(){
          rotate(10,360/cnt);
        });



      });


    </script>
  </body>
</html>
